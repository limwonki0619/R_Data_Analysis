# 예제 5-1. WorldBank 자료로 움직이는 버블챠트 생성하기
library(googleVis)
# 다양한 구글챠트 활용하기
install.packages('ggmap')
setwd('D:/Workspace/R_Data_Analysis/Part2/Stage5_GoogleChart')
setwd('D:/limworkspace/R_Data_Analysis/Part2/Stage5_GoogleChart')
# 예제 5-1. WorldBank 자료로 움직이는 버블챠트 생성하기
library(googleVis)
demo(WorldBank)       # 에러 발생
Fruits
Fruits1<- gvisMotionChart(Fruits, idvar="Fruit", timevar="Year")
plot(Fruits1)       # Google API Key 필요
# 예제 5-3 . 서울 지하철 1,2,3,4 호선 이용승객현황 출력하기
line <- read.csv("data/1-4호선승하차승객수.csv",header=T,sep=",")
line
t1 <- gvisMotionChart(line, idvar="노선번호", timevar="시간",
options=list(width=1000,height=500))
plot(t1)
install.packages("foreign")
library(foreign) # SPSS 파일 로드
library(dplyr)   # 전처리
library(ggplot2) # 시각화
library(readxl)  # 엑셀파일 불러오기
### 1. 데이터 준비하기 -------------------------------------------------------------------------------
raw_welfare <- read.spss(file="data/Koweps_hpc10_2015_beta1.sav", to.data.frame = T)
setwd("D:/limworkspace/R_Data_Analysis/Part2/Stage6_RealAnalysis/Ex04_Welfare")
getwd()
### 1. 데이터 준비하기 -------------------------------------------------------------------------------
raw_welfare <- read.spss(file="data/Koweps_hpc10_2015_beta1.sav", to.data.frame = T)
# 복사본 만들기
welfare <- raw_welfare
welfare <- rename(welfare,                 # dplyr::rename(dataset, new_colname, old_colname)
sex = h10_g3,            # 성별
birth = h10_g4,          # 태어난 연도
marriage = h10_g10,      # 혼인상태
religion = h10_g11,      # 종교
income = p1002_8aq1,     # 월급
code_job = h10_eco9,     # 직종코드
code_region = h10_reg7)  # 지역코드
welfare <- select(welfare, sex, birth, marriage, religion, income, code_job, code_region)
# 변수 검토 및 이상치 확인
class(welfare$sex); table(elfare$sex)
# 변수 검토 및 이상치 확인
class(welfare$sex); table(welfare$sex)
welfare$sex <- ifelse(welfare$sex == 9, NA, welfare$sex)
# 결측치 확인
table(is.na(welfare$sex)) # NA 개수 파악
table(is.na(welfare$sex)) # NA 개수 파악
class(welfare$income); summary(welfare$income)                # 변수 검토 및 이상치 확인
qplot(welfare$income) + xlim(0,1000)
welfare$income <- ifelse(welfare$income %in% c(0,9999), NA, welfare$income) # 결측치 처리
# 1.2 월급 변수 검토 및 전처리
class(welfare$income); summary(welfare$income)                # 변수 및 이상치 확인
# 1.3. 성별에 따른 월급 평균표 만들기 및 그래프 그리기
sex_income <- welfare %>%
filter(!is.na(income)) %>%       # NA가 아닌것만 가져오기
group_by(sex) %>%                # 성별로 그룹
summarise(mean_income = mean(income)); sex_income
ggplot(sex_income,aes(x=reorder(sex, -mean_income), y=mean_income, fill=sex)) +
geom_col()
library(ggplot2) # 시각화
library(dplyr)   # 전처리
library(foreign) # SPSS 파일 로드
ggplot(sex_income,aes(x=reorder(sex, -mean_income), y=mean_income, fill=sex)) +
geom_col()
ggplot(sex_income,aes(x=reorder(sex, -mean_income), y=mean_income)) +
geom_col()
ggplot(sex_income,aes(x=reorder(sex, -mean_income), y=mean_income, fill=sex)) +
geom_col()
